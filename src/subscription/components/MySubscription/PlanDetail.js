import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { formatCurrency } from "@/subscription/utils/formatDate";
export default function PlanDetails({ plan }) {
    // Verificar si hay un descuento activo
    const hasActiveDiscount = plan.discountEvent?.isActive;
    // Calcular el precio con descuento si hay un descuento activo
    const discountedPrice = hasActiveDiscount
        ? Number(plan.totalPrice) - (Number(plan.totalPrice) * plan.discountEvent.value) / 100
        : Number(plan.totalPrice);
    // Calcular el precio de la cuota con descuento si hay un descuento activo
    const discountedInstallmentPrice = hasActiveDiscount && plan.installments > 1
        ? Number(plan.installmentPrice) - (Number(plan.installmentPrice) * plan.discountEvent.value) / 100
        : Number(plan.installmentPrice);
    // Formatear las fechas del descuento si existe
    const formatDiscountDate = (dateString) => {
        return new Date(dateString).toLocaleDateString("es-AR", {
            year: "numeric",
            month: "long",
            day: "numeric",
        });
    };
    return (_jsxs("div", { className: "bg-[#eff6ff] rounded-lg border border-[#42d7c7] shadow-sm mb-6", children: [_jsx("div", { className: "p-6 border-b border-[#42d7c7]", children: _jsxs("div", { className: "flex justify-between items-center", children: [_jsxs("div", { children: [_jsx("h2", { className: "text-2xl font-semibold text-[#0c154c]", children: plan.name }), _jsx("p", { className: "text-sm text-gray-600 mt-1", children: plan.description })] }), _jsxs("div", { className: "bg-[#0c154c] text-white px-3 py-1 rounded-full text-sm", children: ["Nivel ", plan.accessLevel] })] }) }), _jsxs("div", { className: "p-6", children: [_jsxs("div", { className: "flex flex-col md:flex-row md:justify-between md:items-center mb-6", children: [_jsxs("div", { className: "mb-4 md:mb-0", children: [_jsx("p", { className: "text-sm text-gray-500", children: "Precio total" }), hasActiveDiscount ? (_jsxs(_Fragment, { children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx("p", { className: "text-2xl font-bold text-[#0c154c]", children: formatCurrency(discountedPrice) }), _jsx("span", { className: "text-sm line-through text-gray-500", children: formatCurrency(plan.totalPrice) }), _jsxs("span", { className: "bg-[#42d7c7] text-[#0c154c] text-xs font-medium px-2 py-1 rounded-full", children: [plan.discountEvent.value, "% OFF"] })] }), plan.discountEvent?.description && (_jsx("p", { className: "text-sm text-[#1d4ed8] mt-1", children: plan.discountEvent.description }))] })) : (_jsx("p", { className: "text-2xl font-bold text-[#0c154c]", children: formatCurrency(plan.totalPrice) })), plan.installments > 1 && (_jsxs("p", { className: "text-sm text-gray-500 mt-1", children: [plan.installments, " cuotas de", " ", hasActiveDiscount ? formatCurrency(discountedInstallmentPrice) : formatCurrency(plan.installmentPrice)] }))] }), _jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-500", children: "Duraci\u00F3n" }), _jsxs("p", { className: "text-lg font-medium text-[#0c154c]", children: [plan.duration, " ", plan.durationType] })] })] }), hasActiveDiscount && (_jsx("div", { className: "mb-6 p-4 bg-[#f0fdfa] border border-[#42d7c7] rounded-md", children: _jsxs("div", { className: "flex items-start", children: [_jsxs("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-5 w-5 text-[#42d7c7] mr-2 mt-0.5", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [_jsx("path", { d: "M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" }), _jsx("line", { x1: "7", y1: "7", x2: "7.01", y2: "7" })] }), _jsxs("div", { children: [_jsxs("p", { className: "font-medium text-[#0c154c]", children: ["Promoci\u00F3n: ", plan.discountEvent.event] }), _jsxs("p", { className: "text-sm text-gray-600 mt-1", children: ["V\u00E1lido desde ", formatDiscountDate(plan.discountEvent.startDate), " hasta", " ", formatDiscountDate(plan.discountEvent.endDate)] })] })] }) })), _jsxs("div", { className: "mb-6", children: [_jsx("h3", { className: "text-md font-medium text-[#0c154c] mb-3", children: "Caracter\u00EDsticas incluidas:" }), _jsx("ul", { className: "space-y-2", children: plan.features.map((feature, index) => (_jsxs("li", { className: "flex items-start", children: [_jsx("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-5 w-5 text-[#42d7c7] mr-2 mt-0.5", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: _jsx("polyline", { points: "20 6 9 17 4 12" }) }), _jsx("span", { className: "text-gray-700", children: feature })] }, index))) })] })] })] }));
}
