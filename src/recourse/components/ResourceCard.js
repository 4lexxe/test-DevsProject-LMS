import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from "react/jsx-runtime";
import { Link } from 'react-router-dom';
import { ExternalLink, Clock, Share2, Edit, Trash2 } from 'lucide-react';
import ResourceTypeIcon from '../types/ResourceTypeIcon';
import ResourceUserInfo from '../userInfo/ResourceUserInfo';
import RatingComponent from './Rating';
import { usePermissions } from '../../shared/hooks/usePermissions';
const ResourceCard = ({ resource, user }) => {
    const { canModifyResource } = usePermissions();
    const truncateText = (text, maxLength = 55) => {
        if (text.length > maxLength) {
            return text.slice(0, maxLength) + "...";
        }
        return text;
    };
    const canEdit = canModifyResource(resource.userId);
    return (_jsx("div", { className: "group relative bg-gray-100 rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden border border-gray-400 select-none", children: _jsxs("div", { className: "flex flex-col sm:flex-row", children: [_jsx("div", { className: "h-40 sm:h-auto sm:w-56 sm:min-w-[14rem] relative overflow-hidden", children: _jsxs("div", { className: "absolute inset-0", children: [_jsx("div", { className: "w-full h-full flex items-center justify-center overflow-hidden bg-gray-50", children: _jsx("img", { src: resource.coverImage ||
                                        "https://images.unsplash.com/photo-1516979187457-637abb4f9353?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80", alt: resource.title, className: "w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500 ease-out", loading: "lazy" }) }), _jsx("div", { className: "absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" }), _jsxs("div", { className: "absolute bottom-2 right-2 flex gap-1.5 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300 ease-out", children: [canEdit && (_jsxs(_Fragment, { children: [_jsx("button", { className: "p-1.5 rounded-full bg-white/90 backdrop-blur-sm hover:bg-white transition-colors duration-200 text-blue-600 hover:text-blue-700 shadow-sm", title: "Editar recurso", children: _jsx(Edit, { className: "w-3.5 h-3.5" }) }), _jsx("button", { className: "p-1.5 rounded-full bg-white/90 backdrop-blur-sm hover:bg-white transition-colors duration-200 text-red-600 hover:text-red-700 shadow-sm", title: "Eliminar recurso", children: _jsx(Trash2, { className: "w-3.5 h-3.5" }) })] })), _jsx("button", { className: "p-1.5 rounded-full bg-white/90 backdrop-blur-sm hover:bg-white transition-colors duration-200 text-gray-700 hover:text-gray-900 shadow-sm", children: _jsx(Share2, { className: "w-3.5 h-3.5" }) }), _jsx("button", { className: "p-1.5 rounded-full bg-white/90 backdrop-blur-sm hover:bg-white transition-colors duration-200 text-gray-700 hover:text-gray-900 shadow-sm", children: _jsx(Clock, { className: "w-3.5 h-3.5" }) })] })] }) }), _jsxs("div", { className: "flex-1 p-3 sm:p-6 flex flex-col", children: [_jsxs("div", { className: "flex items-start gap-3", children: [_jsx("div", { className: "p-2 sm:p-2.5 rounded-lg bg-gray-50/80 backdrop-blur-sm border border-gray-100 shadow-sm group-hover:bg-gray-50 transition-all duration-200 group-hover:scale-105", children: _jsx(ResourceTypeIcon, { type: resource.type }) }), _jsxs("div", { className: "flex-1 min-w-0", children: [_jsxs("div", { className: "flex items-start justify-between gap-2", children: [_jsx("h3", { className: "text-sm sm:text-lg font-semibold text-gray-900 group-hover:text-gray-800 transition-colors line-clamp-1 sm:line-clamp-2", children: truncateText(resource.title) }), _jsx("div", { className: "flex-shrink-0", children: _jsx(RatingComponent, { resourceId: resource.id, mode: "interactive" }) })] }), resource.description && (_jsx("p", { className: "hidden sm:block mt-2 text-gray-600 text-sm line-clamp-2 leading-relaxed", children: resource.description }))] })] }), _jsxs("div", { className: "mt-3 sm:mt-auto pt-3 flex flex-col sm:flex-row gap-2 sm:gap-4 items-stretch sm:items-center justify-between border-t border-gray-100/80", children: [_jsx("div", { className: "sm:block", children: _jsx(ResourceUserInfo, { user: user, createdAt: resource.createdAt }) }), _jsxs(Link, { to: `/resources/${resource.id}`, className: "group/button inline-flex items-center justify-center px-3 sm:px-5 py-2 sm:py-2.5 bg-gray-500 hover:bg-gray-800 text-white rounded-lg transition-all duration-200 text-xs sm:text-sm font-medium shadow-sm hover:shadow-md w-full sm:w-auto", children: [_jsx("span", { className: "mr-1.5", children: "Ver Recurso" }), _jsx(ExternalLink, { className: "w-3.5 h-3.5 sm:w-4 sm:h-4 transform transition-all duration-300 group-hover/button:translate-x-0.5 group-hover/button:-translate-y-0.5" })] })] })] })] }) }));
};
export default ResourceCard;
